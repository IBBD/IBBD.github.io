# License授权管理平台与SDK架构设计思路

对于软件类产品，无论时2B，还是2C，大部分都会涉及到License的授权问题，怎么设计实现安全易用的授权是一个比较通用的需求。

## 1. 我们的场景

我们公司为企业提供算法和模型的服务，形态通常都是以软件的形式提供，交付给客户的通常算法API接口，或者一整套囊括业务在内的平台，这就要求我们的授权平台除了安全和绑定机器之外，还应该支持：

1. 不同的产品能够方便的进行接入，尽量简化接入工作，最好能够做到算法工程师也能比较容易的接入；
2. 比较方便的授权管理，例如更新授权，最好是商务同事根据我们的操作指引就能自己给客户更新授权，尽可能降级技术门槛。

## 2. 设计思路

- 对于第一点，需要实现一个客户端接入SDK，把硬件指纹校验和有效期校验等直接封装到SDK里，客户端则只需要调用SDK即可。
- 对于第二点，则需要实现一个授权管理平台，商务或者产品的同事，只需要在平台上下载新的License文件到指定位置即可。

只要实现这两点，一个授权管理平台就算达到了目的。

## 3. 公钥和私钥体系

简单的密钥场景是这样的，就像一把锁，如果想要某人能够开这把锁，那就只能给他一把钥匙。这对于一把锁来说，可能已经够了，可是对于互联网来说却是不太够的，如果密钥在传输过程中泄露了怎么办？如果我把密钥传给了你，你用来伪造数据怎么办？

而公钥私钥算法就没有这方面的烦恼了，在这个体系下，如果我要给你发信息，我就用自己的私钥加密信息，然后将加密的信息传给你，你则用我给你的公钥进行解密。在这个过程中，即使有人截获了传输的信息，他也没法伪造，因为私钥只有我自己有。当然，如果你的公钥泄密了，别人也能获取信息的内容，但是即使这样他也没法进行伪造。这样就能保证你能接收到正确的信息。

对于我们这个授权管理平台关联三个实体：服务器，客户端，客户端SDK。这三个实体各自都有一套公钥和私钥，例如客户端SDK，自己保留私钥，公钥可以放到服务器上，这样服务器就可以将加密后的授权文件传给客户端SDK，如此SDK就能对其进行正确的解密，而且只要密钥没有泄露，别人就没法窥视加密前的信息，也就没法进行伪造。

## 4. 整体架构设计思路



